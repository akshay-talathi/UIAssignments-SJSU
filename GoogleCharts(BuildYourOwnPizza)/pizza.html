<html>
  <head>

    <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
            <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
            <meta name="description" content="SCO Login">
            <meta name="keywords" content="HTML,CSS,XML,JavaScript">
            <meta name="author" content="akshaytalathi" />
    <title>Pizza Charts</title>
    <link rel="shortcut icon" href="images/pizza.ico" />
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <style type="text/css">
    h1{
      text-align: center;
    }

    div{
     padding-left: 30px ;

    }
    </style>
    <script type="text/javascript">

      // Load the Visualization API and the corechart package.
     

      // Set a callback to run when the Google Visualization API is loaded.
      // google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
        var QueryString = function () {
 
  var query_string = {};
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
        // If first entry with this name
    if (typeof query_string[pair[0]] === "undefined") {
      query_string[pair[0]] = decodeURIComponent(pair[1]);
        // If second entry with this name
    } else if (typeof query_string[pair[0]] === "string") {
      var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
      query_string[pair[0]] = arr;
        // If third or later entry with this name
    } else {
      query_string[pair[0]].push(decodeURIComponent(pair[1]));
    }
  } 
    return query_string;
}();

        
        
    
      google.charts.load('current', {'packages':['corechart', 'sankey']});
       google.charts.setOnLoadCallback(drawChart);
  
      function drawChart() {
        var first = QueryString.value1;
        var second = QueryString.value2;
        var third = QueryString.value3;
        var x = [];
    

                        var result1 = first.split(",");

                        var result2 = second.split(",");

                        var result3 = third.split(",");

             for(var i = 0; i < result1.length ; i++) {
          status = result2[i];
          num = parseInt(result3[i]);
          x.push([status, num]);
        }
      
        var dat = new google.visualization.DataTable();
         dat.addColumn('string', 'Topping');
        dat.addColumn('number', 'Slices');
        dat.addRows(x);


        // Set chart options
        var options = {'title':'Pizza Chart',
                       'width':500,
                       'height':600};

        // Instantiate and draw our chart, passing in some options.
       
        var rows = [];
             for(var i = 0; i < result1.length ; i++) {
          date = result1[i];
          status = result2[i];
          num = parseInt(result3[i]);
          rows.push([date, status, num]);
        }
       
    var data2 = new google.visualization.DataTable();
    data2.addColumn('string', 'type');
    data2.addColumn('string', 'selection');
    data2.addColumn('number', 'Selected Value');
  
    data2.addRows(rows);


    var colors = ['#a6cee3', '#b2df8a', '#fb9a99', '#fdbf6f',
                  '#cab2d6', '#ffff99', '#1f78b4', '#33a02c'];

    var options2 = {

      width: 600,
      sankey: {
        node: {
          colors: colors
        },
        link: {
          colorMode: 'gradient',
          colors: colors
        }
      }
    };
  

    // Instantiate and draw our chart, passing in some options.
     var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(dat, options);

    var chart2 = new google.visualization.Sankey(document.getElementById('sankey_multiple'));
    chart2.draw(data2, options2);

   }

        function pizza()
        {

                window.location.href = 'PizzaAssignment.html';

        }

</script>

    
  </head>

  <body>
              <hr>
            <center><button type="button" class="btn btn-info" onclick="pizza();">Build Pizza Again</button> </center> 
    <!--Div that will hold the pie chart-->
      <h1>Sankey Chart</h1>
        <div id="sankey_multiple" style="width: 200px; height: 300px;"></div>

        <h1> Pie Chart</h1>
    <div id="chart_div" style="width: 200px; height: 300px;"></div>

  </body>
</html>




